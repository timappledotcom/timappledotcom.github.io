document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".nav-toggle"),e=document.querySelector(".nav-menu"),i=document.body;if(t&&e){t.setAttribute("aria-expanded","false");let o=0,a=0;e.addEventListener("touchstart",function(e){o=e.changedTouches[0].screenY},{passive:!0}),e.addEventListener("touchend",function(e){a=e.changedTouches[0].screenY,f()},{passive:!0});function f(){const t=50,s=o-a;s>t&&e.classList.contains("nav-menu-open")&&n()}t.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();const o=t.getAttribute("aria-expanded")==="true";if("vibrate"in navigator&&navigator.vibrate(50),t.setAttribute("aria-expanded",!o),e.classList.toggle("nav-menu-open"),!o&&window.innerWidth<=768?i.style.overflow="hidden":i.style.overflow="",o?(document.removeEventListener("click",s),document.removeEventListener("touchstart",s)):setTimeout(()=>{document.addEventListener("click",s),document.addEventListener("touchstart",s,{passive:!0})},10),!o){const t=e.querySelector(".nav-link");t&&setTimeout(()=>t.focus(),150)}}),t.addEventListener("touchstart",function(){this.style.transform="scale(0.95)"},{passive:!0}),t.addEventListener("touchend",function(){this.style.transform=""},{passive:!0});const r=e.querySelectorAll(".nav-link");r.forEach(e=>{e.addEventListener("click",function(){window.innerWidth<=768&&n()}),e.addEventListener("touchstart",function(){window.innerWidth<=768&&(this.style.backgroundColor="var(--color-background-alt)")},{passive:!0}),e.addEventListener("touchend",function(){window.innerWidth<=768&&setTimeout(()=>{this.style.backgroundColor=""},150)},{passive:!0})}),document.addEventListener("keydown",function(s){s.key==="Escape"&&e.classList.contains("nav-menu-open")&&(n(),t.focus())})}function n(){const e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav-menu");e&&t&&(e.setAttribute("aria-expanded","false"),t.classList.remove("nav-menu-open"),i.style.overflow="",document.removeEventListener("click",s),document.removeEventListener("touchstart",s))}function s(e){const t=document.querySelector(".nav-toggle"),s=document.querySelector(".nav-menu");t&&s&&!t.contains(e.target)&&!s.contains(e.target)&&n()}let c,o=r();window.addEventListener("resize",function(){clearTimeout(c),c=setTimeout(function(){const e=r(),t=document.querySelector(".nav-toggle"),s=document.querySelector(".nav-menu");e!=="mobile"&&t&&s&&n(),e!==o&&(o=e,l(o))},150)});function r(){const e=window.innerWidth;return e<480?"xs":e<640?"sm":e<768?"mobile":e<1024?"md":e<1280?"lg":"xl"}function l(e){document.body.setAttribute("data-breakpoint",e),e==="xs"||e==="sm"||e==="mobile"?d():u()}function d(){const e=document.querySelectorAll("button, a, input, select, textarea");e.forEach(e=>{e.classList.contains("touch-optimized")||(e.classList.add("touch-target"),e.classList.add("touch-optimized"))})}function u(){const e=document.querySelectorAll(".touch-optimized");e.forEach(e=>{e.classList.remove("touch-target"),e.classList.remove("touch-optimized")})}document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){const s=document.querySelector(this.getAttribute("href"));if(s){t.preventDefault(),e&&e.classList.contains("nav-menu-open")&&n();const o=window.innerWidth<=768,i=o?80:100,a=s.getBoundingClientRect().top+window.pageYOffset-i;window.scrollTo({top:a,behavior:"smooth"}),setTimeout(()=>{s.focus({preventScroll:!0})},500)}})});const h=document.querySelectorAll(".post-summary");h.forEach(e=>{let t;e.addEventListener("touchstart",function(){t=setTimeout(()=>{this.style.transform="scale(0.98)",this.style.transition="transform 0.1s ease"},100)},{passive:!0}),e.addEventListener("touchend",function(){clearTimeout(t),this.style.transform=""},{passive:!0}),e.addEventListener("touchcancel",function(){clearTimeout(t),this.style.transform=""},{passive:!0})});const m=document.querySelectorAll(".pagination-prev, .pagination-next");if(m.forEach(e=>{e.addEventListener("touchstart",function(){this.style.transform="scale(0.95)"},{passive:!0}),e.addEventListener("touchend",function(){this.style.transform=""},{passive:!0})}),"IntersectionObserver"in window&&window.innerWidth<=768){const t=document.querySelectorAll("img[data-src]"),e=new IntersectionObserver((t)=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n.src=n.dataset.src,n.removeAttribute("data-src"),e.unobserve(n)}})});t.forEach(t=>e.observe(t))}let a=!1;function p(){a=!1}window.addEventListener("scroll",function(){a||(requestAnimationFrame(p),a=!0)},{passive:!0});function g(e){const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.textContent=`Layout changed to ${e} view`,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},1e3)}l(o),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(document.documentElement.style.setProperty("--transition-base","0.01ms"),document.documentElement.style.setProperty("--transition-fast","0.01ms"),document.documentElement.style.setProperty("--transition-slow","0.01ms"))}),console.log("Hugo Tim Apple Theme with enhanced mobile support loaded")